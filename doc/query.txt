create table Persone(
	codiceFiscale char(16) primary key,
	nome varchar(25) not null,
	cognome varchar(25) not null,
	cittÃ  varchar(25),
	via varchar(50),
	numeroCivico smallint,
	cap smallint
);

create table UtentiRegistrati(
	userid varchar(16) primary key,
	password varchar(16) not null,
	email varchar(50) not null,
	personaId char(16) references Persone(codiceFiscale)
);

create table Canzoni(
	id char(18) primary key,
	titolo varchar(50) not null,
	produttore varchar(50) not  null,
	anno smallint not null,
	album varchar(50),
	durata tinyint
);

create table Emozione(
	id int primary key,
	tipo varchar(15) not null
);

create table Emozioni(
	idUtente varchar(16) references UtentiRegistrati(userId),
	idCanzone char(18) references Canzoni(id),
	idEmozione smallint references Emozione(id),
	score smallint not null check (score >=0 and score <= 5),
	note text,
	constraint PK_Persone_Canzoni_Emozioni primary key (idUtente, idCanzone, idEmozione)
);